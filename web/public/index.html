<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CacheSim — Cache Replacement Policy Simulator</title>
  <link rel="stylesheet" href="%PUBLIC_URL%/styles.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
  />
</head>
<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root">
    <div class="container">
      <header>
        <h1><i class="fas fa-memory"></i> CacheSim</h1>
        <p>Advanced Cache Replacement Policy Simulator with WebAssembly</p>
      </header>

      <div class="controls">
        <div class="control-group">
          <label for="capacity"><i class="fas fa-database"></i> Cache Capacity:</label>
          <input type="number" id="capacity" value="3" min="1" max="100" />
        </div>

        <div class="control-group">
          <label><i class="fas fa-cogs"></i> Policies:</label>
          <div class="checkbox-group">
            <label><input type="checkbox" value="LRU" checked /> <i class="fas fa-clock"></i> LRU</label>
            <label><input type="checkbox" value="FIFO" /> <i class="fas fa-stream"></i> FIFO</label>
            <label><input type="checkbox" value="LFU" /> <i class="fas fa-chart-bar"></i> LFU</label>
            <label><input type="checkbox" value="ARC" /> <i class="fas fa-balance-scale"></i> ARC</label>
          </div>
        </div>

        <div class="control-group">
          <label><i class="fas fa-play-circle"></i> Mode:</label>
          <div class="radio-group">
            <label><input type="radio" name="mode" value="animate" checked /> <i class="fas fa-film"></i> Animate</label>
            <label><input type="radio" name="mode" value="fast" /> <i class="fas fa-bolt"></i> Fast</label>
          </div>
        </div>

        <div class="control-group" id="snapshot-control" style="display: none;">
          <label for="snapshotEvery"><i class="fas fa-camera"></i> Snapshot every:</label>
          <input type="number" id="snapshotEvery" value="1000" min="1" />
        </div>

        <div class="control-group">
          <label for="traceInput"><i class="fas fa-list-ol"></i> Trace:</label>
          <textarea id="traceInput" rows="8" placeholder="Enter cache operations (e.g., PUT A apple, GET A)">
PUT A apple
PUT B banana
PUT C cherry
GET A
PUT D dragon
GET B
PUT E eagle
GET C</textarea>
        </div>

        <div class="button-group">
          <button id="runBtn"><i class="fas fa-play"></i> Run Simulation</button>
          <button id="resetBtn"><i class="fas fa-redo"></i> Reset</button>
        </div>
      </div>

      <div class="player-controls" id="playerBar" style="display: none;">
        <button id="stepBackBtn"><i class="fas fa-step-backward"></i></button>
        <button id="playPauseBtn"><i class="fas fa-play"></i></button>
        <button id="stepForwardBtn"><i class="fas fa-step-forward"></i></button>
        <div class="speed-control">
          <label for="speedSlider"><i class="fas fa-tachometer-alt"></i> Speed:</label>
          <input type="range" id="speedSlider" min="0.1" max="5" step="0.1" value="1" />
          <span id="speedValue">1×</span>
        </div>
        <div class="step-info">
          <i class="fas fa-list-ol"></i> Step <span id="currentStep">1</span> of <span id="totalSteps">1</span>
        </div>
      </div>

      <div class="visualization" id="visualizationArea">
        <div class="placeholder">
          <i class="fas fa-chart-line" style="font-size: 3rem; color: #667eea; margin-bottom: 20px;"></i>
          <p>Enter a trace and click "Run Simulation" to start</p>
        </div>
      </div>

      <div class="comparison-summary" id="comparisonSummary" style="display: none;">
        <h3><i class="fas fa-chart-pie"></i> Comparison Summary</h3>
        <table id="comparisonTable">
          <thead>
            <tr>
              <th><i class="fas fa-cogs"></i> Policy</th>
              <th><i class="fas fa-check-circle"></i> Hits</th>
              <th><i class="fas fa-times-circle"></i> Misses</th>
              <th><i class="fas fa-percentage"></i> Hit Ratio</th>
              <th><i class="fas fa-eject"></i> Evictions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Load WASM + JS -->
  <script src="%PUBLIC_URL%/cachesim.js"></script>
  <script src="%PUBLIC_URL%/main.js"></script>
</body>
</html>
