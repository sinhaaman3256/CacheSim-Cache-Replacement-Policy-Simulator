<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CacheSim Demo — Cache Replacement Policy Simulator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>CacheSim — LRU / LFU / ARC / FIFO</h1>
            <p><strong>Demo Mode:</strong> This shows the UI with mock data. Install Emscripten and build WASM for full functionality.</p>
        </header>
        
        <div class="controls-panel">
            <div class="control-group">
                <label for="capacity">Cache Capacity:</label>
                <input type="number" id="capacity" value="2" min="1" max="10">
            </div>
            
            <div class="control-group">
                <label>Policies:</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" id="lru" checked> LRU</label>
                    <label><input type="checkbox" id="fifo" checked> FIFO</label>
                    <label><input type="checkbox" id="lfu"> LFU</label>
                    <label><input type="checkbox" id="arc"> ARC</label>
                </div>
            </div>
            
            <div class="control-group">
                <label>Mode:</label>
                <div class="radio-group">
                    <label><input type="radio" name="mode" value="animate" checked> Animate</label>
                    <label><input type="radio" name="mode" value="fast"> Fast</label>
                </div>
            </div>
            
            <div class="control-group">
                <label for="trace">Trace Input:</label>
                <textarea id="trace" rows="8" placeholder="Enter trace operations...">PUT A apple
PUT B banana
GET A
PUT C cherry
GET B
GET C</textarea>
            </div>
            
            <div class="control-group">
                <button onclick="runDemo()">Run Demo</button>
                <button onclick="reset()">Reset</button>
            </div>
        </div>
        
        <div class="player-bar" id="playerBar" style="display: block;">
            <button onclick="stepBack()">⏮ Step Back</button>
            <button onclick="togglePlay()" id="playBtn">▶ Play</button>
            <button onclick="stepForward()">Step Forward ⏭</button>
            <span class="step-info">Step <span id="currentStep">3</span> / <span id="totalSteps">6</span></span>
            <input type="range" id="speedSlider" min="1" max="10" value="5">
            <span>Speed</span>
        </div>
        
        <div class="visualization-area" id="visualizationArea">
            <!-- Demo content will be populated here -->
        </div>
        
        <div class="comparison-summary" id="comparisonSummary" style="display: block;">
            <h3>Comparison Summary</h3>
            <table>
                <thead>
                    <tr>
                        <th>Policy</th>
                        <th>Hits</th>
                        <th>Misses</th>
                        <th>Hit Ratio</th>
                        <th>Evictions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>LRU</td>
                        <td>2</td>
                        <td>1</td>
                        <td>66.67%</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>FIFO</td>
                        <td>3</td>
                        <td>0</td>
                        <td>100%</td>
                        <td>1</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Mock demo functionality
        function runDemo() {
            const visualArea = document.getElementById('visualizationArea');
            visualArea.innerHTML = `
                <div class="policy-results">
                    <div class="policy-row">
                        <div class="policy-title">LRU Policy</div>
                        <div class="policy-stats">Hits: 2, Misses: 1, Evictions: 1</div>
                    </div>
                    <div class="cache-row">
                        <div class="cache-box hit">
                            <div class="cache-key">A</div>
                            <div class="cache-value">apple</div>
                        </div>
                        <div class="cache-box miss">
                            <div class="cache-key">C</div>
                            <div class="cache-value">cherry</div>
                        </div>
                    </div>
                </div>
                
                <div class="policy-results">
                    <div class="policy-row">
                        <div class="policy-title">FIFO Policy</div>
                        <div class="policy-stats">Hits: 3, Misses: 0, Evictions: 1</div>
                    </div>
                    <div class="cache-row">
                        <div class="cache-box hit">
                            <div class="cache-key">B</div>
                            <div class="cache-value">banana</div>
                        </div>
                        <div class="cache-box hit">
                            <div class="cache-key">C</div>
                            <div class="cache-value">cherry</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('playerBar').style.display = 'block';
            document.getElementById('comparisonSummary').style.display = 'block';
        }
        
        function stepBack() { 
            let current = parseInt(document.getElementById('currentStep').textContent);
            if (current > 1) {
                document.getElementById('currentStep').textContent = current - 1;
            }
        }
        
        function stepForward() { 
            let current = parseInt(document.getElementById('currentStep').textContent);
            let total = parseInt(document.getElementById('totalSteps').textContent);
            if (current < total) {
                document.getElementById('currentStep').textContent = current + 1;
            }
        }
        
        function togglePlay() {
            const btn = document.getElementById('playBtn');
            if (btn.textContent === '▶ Play') {
                btn.textContent = '⏸ Pause';
            } else {
                btn.textContent = '▶ Play';
            }
        }
        
        function reset() {
            document.getElementById('visualizationArea').innerHTML = '';
            document.getElementById('playerBar').style.display = 'none';
            document.getElementById('comparisonSummary').style.display = 'none';
        }
    </script>
</body>
</html>
